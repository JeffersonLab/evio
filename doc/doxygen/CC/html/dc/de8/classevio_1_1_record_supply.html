<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>evio: evio::RecordSupply Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">evio
   &#160;<span id="projectnumber">6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dc/de8/classevio_1_1_record_supply.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../df/d3b/classevio_1_1_record_supply-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">evio::RecordSupply Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This thread-safe, lock-free class is used to provide a very fast supply of RecordRingItems which are reused (using Disruptor software package).  
 <a href="../../dc/de8/classevio_1_1_record_supply.html#details">More...</a></p>

<p><code>#include &lt;RecordSupply.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a47d72338250d1be25e5e1fdfb2203684"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a47d72338250d1be25e5e1fdfb2203684">RecordSupply</a> ()</td></tr>
<tr class="memdesc:a47d72338250d1be25e5e1fdfb2203684"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="../../dc/de8/classevio_1_1_record_supply.html#a47d72338250d1be25e5e1fdfb2203684">More...</a><br /></td></tr>
<tr class="separator:a47d72338250d1be25e5e1fdfb2203684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab292a973d6671f9581e940617eff7cb0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#ab292a973d6671f9581e940617eff7cb0">RecordSupply</a> (const <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html">RecordSupply</a> &amp;supply)=delete</td></tr>
<tr class="separator:ab292a973d6671f9581e940617eff7cb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a149df78b303a2043f849dd2670dcfff3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a149df78b303a2043f849dd2670dcfff3">RecordSupply</a> (uint32_t ringSize, <a class="el" href="../../da/d7d/classevio_1_1_byte_order.html">ByteOrder</a> order, uint32_t threadCount, uint32_t maxEventCount, uint32_t maxBufferSize, <a class="el" href="../../da/d08/classevio_1_1_compressor.html#aed2330d08ee8c96b2690fec7f9a68747">Compressor::CompressionType</a> &amp;compressionType)</td></tr>
<tr class="memdesc:a149df78b303a2043f849dd2670dcfff3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="../../dc/de8/classevio_1_1_record_supply.html#a149df78b303a2043f849dd2670dcfff3">More...</a><br /></td></tr>
<tr class="separator:a149df78b303a2043f849dd2670dcfff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae73df7e609b8b0e534fed47a865f5e1b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#ae73df7e609b8b0e534fed47a865f5e1b">~RecordSupply</a> ()</td></tr>
<tr class="separator:ae73df7e609b8b0e534fed47a865f5e1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b0898bcf9761a1867eaa2b0c00b3f6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a5b0898bcf9761a1867eaa2b0c00b3f6a">errorAlert</a> ()</td></tr>
<tr class="memdesc:a5b0898bcf9761a1867eaa2b0c00b3f6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to have sequence barriers throw a Disruptor's AlertException.  <a href="../../dc/de8/classevio_1_1_record_supply.html#a5b0898bcf9761a1867eaa2b0c00b3f6a">More...</a><br /></td></tr>
<tr class="separator:a5b0898bcf9761a1867eaa2b0c00b3f6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1581122e8b78be37ce5283b99aa45da"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#ac1581122e8b78be37ce5283b99aa45da">getMaxRingBytes</a> ()</td></tr>
<tr class="memdesc:ac1581122e8b78be37ce5283b99aa45da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the max number of bytes the records in this supply can hold all together.  <a href="../../dc/de8/classevio_1_1_record_supply.html#ac1581122e8b78be37ce5283b99aa45da">More...</a><br /></td></tr>
<tr class="separator:ac1581122e8b78be37ce5283b99aa45da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab01508dc964baf3d2f977e44fb6e4801"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#ab01508dc964baf3d2f977e44fb6e4801">getRingSize</a> ()</td></tr>
<tr class="memdesc:ab01508dc964baf3d2f977e44fb6e4801"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of records in this supply.  <a href="../../dc/de8/classevio_1_1_record_supply.html#ab01508dc964baf3d2f977e44fb6e4801">More...</a><br /></td></tr>
<tr class="separator:ab01508dc964baf3d2f977e44fb6e4801"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a980db60ae9c6f538d3a24ad95359a316"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d7d/classevio_1_1_byte_order.html">ByteOrder</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a980db60ae9c6f538d3a24ad95359a316">getOrder</a> ()</td></tr>
<tr class="memdesc:a980db60ae9c6f538d3a24ad95359a316"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the byte order of all records in this supply.  <a href="../../dc/de8/classevio_1_1_record_supply.html#a980db60ae9c6f538d3a24ad95359a316">More...</a><br /></td></tr>
<tr class="separator:a980db60ae9c6f538d3a24ad95359a316"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f795d94a49b3b2e4e397c0107042c1f"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a1f795d94a49b3b2e4e397c0107042c1f">getFillLevel</a> ()</td></tr>
<tr class="memdesc:a1f795d94a49b3b2e4e397c0107042c1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the percentage of data-filled but unwritten records in ring.  <a href="../../dc/de8/classevio_1_1_record_supply.html#a1f795d94a49b3b2e4e397c0107042c1f">More...</a><br /></td></tr>
<tr class="separator:a1f795d94a49b3b2e4e397c0107042c1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a196dfd437db8f2f2c6a0e23700ef2462"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a196dfd437db8f2f2c6a0e23700ef2462">getLastSequence</a> ()</td></tr>
<tr class="memdesc:a196dfd437db8f2f2c6a0e23700ef2462"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the sequence of last ring buffer item published (seq starts at 0).  <a href="../../dc/de8/classevio_1_1_record_supply.html#a196dfd437db8f2f2c6a0e23700ef2462">More...</a><br /></td></tr>
<tr class="separator:a196dfd437db8f2f2c6a0e23700ef2462"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6ac986bb6d740afcbc0b9f4560e1564"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html">RecordRingItem</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#af6ac986bb6d740afcbc0b9f4560e1564">get</a> ()</td></tr>
<tr class="memdesc:af6ac986bb6d740afcbc0b9f4560e1564"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next available record item from the ring buffer.  <a href="../../dc/de8/classevio_1_1_record_supply.html#af6ac986bb6d740afcbc0b9f4560e1564">More...</a><br /></td></tr>
<tr class="separator:af6ac986bb6d740afcbc0b9f4560e1564"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68fd39ed3f305468efa495962bf2b5a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a68fd39ed3f305468efa495962bf2b5a9">publish</a> (std::shared_ptr&lt; <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html">RecordRingItem</a> &gt; &amp;item)</td></tr>
<tr class="memdesc:a68fd39ed3f305468efa495962bf2b5a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell consumers that the record item is ready for consumption.  <a href="../../dc/de8/classevio_1_1_record_supply.html#a68fd39ed3f305468efa495962bf2b5a9">More...</a><br /></td></tr>
<tr class="separator:a68fd39ed3f305468efa495962bf2b5a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63190f0963f537c6fb6b29d8377beaa5"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html">RecordRingItem</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a63190f0963f537c6fb6b29d8377beaa5">getToCompress</a> (uint32_t threadNumber)</td></tr>
<tr class="memdesc:a63190f0963f537c6fb6b29d8377beaa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next available record item from the ring buffer in order to compress the data already in it.  <a href="../../dc/de8/classevio_1_1_record_supply.html#a63190f0963f537c6fb6b29d8377beaa5">More...</a><br /></td></tr>
<tr class="separator:a63190f0963f537c6fb6b29d8377beaa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada13c1639029905ae234fa384cadd82b"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html">RecordRingItem</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#ada13c1639029905ae234fa384cadd82b">getToWrite</a> ()</td></tr>
<tr class="memdesc:ada13c1639029905ae234fa384cadd82b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next available record item from the ring buffer in order to write data into it.  <a href="../../dc/de8/classevio_1_1_record_supply.html#ada13c1639029905ae234fa384cadd82b">More...</a><br /></td></tr>
<tr class="separator:ada13c1639029905ae234fa384cadd82b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac80bfbdf6f82fd10cc0631348d784fa6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#ac80bfbdf6f82fd10cc0631348d784fa6">releaseCompressor</a> (std::shared_ptr&lt; <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html">RecordRingItem</a> &gt; &amp;item)</td></tr>
<tr class="memdesc:ac80bfbdf6f82fd10cc0631348d784fa6"><td class="mdescLeft">&#160;</td><td class="mdescRight">A compressing thread releases its claim on the given ring buffer item so it becomes available for use by writing thread behind the write barrier.  <a href="../../dc/de8/classevio_1_1_record_supply.html#ac80bfbdf6f82fd10cc0631348d784fa6">More...</a><br /></td></tr>
<tr class="separator:ac80bfbdf6f82fd10cc0631348d784fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88283fcf1be35de2207549cbe8c00062"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a88283fcf1be35de2207549cbe8c00062">releaseWriterSequential</a> (std::shared_ptr&lt; <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html">RecordRingItem</a> &gt; &amp;item)</td></tr>
<tr class="memdesc:a88283fcf1be35de2207549cbe8c00062"><td class="mdescLeft">&#160;</td><td class="mdescRight">A writer thread releases its claim on the given ring buffer item so it becomes available for reuse by the producer.  <a href="../../dc/de8/classevio_1_1_record_supply.html#a88283fcf1be35de2207549cbe8c00062">More...</a><br /></td></tr>
<tr class="separator:a88283fcf1be35de2207549cbe8c00062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a035753d88ac18275851d42bde9b53eb3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a035753d88ac18275851d42bde9b53eb3">releaseWriter</a> (std::shared_ptr&lt; <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html">RecordRingItem</a> &gt; &amp;item)</td></tr>
<tr class="memdesc:a035753d88ac18275851d42bde9b53eb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">A writer thread releases its claim on the given ring buffer item so it becomes available for reuse by the producer.  <a href="../../dc/de8/classevio_1_1_record_supply.html#a035753d88ac18275851d42bde9b53eb3">More...</a><br /></td></tr>
<tr class="separator:a035753d88ac18275851d42bde9b53eb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa5d0c2544350e9e591205c9dd4d5016"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#aaa5d0c2544350e9e591205c9dd4d5016">release</a> (uint32_t threadNum, int64_t sequenceNum)</td></tr>
<tr class="memdesc:aaa5d0c2544350e9e591205c9dd4d5016"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release claim on ring items up to sequenceNum for the given compressor thread.  <a href="../../dc/de8/classevio_1_1_record_supply.html#aaa5d0c2544350e9e591205c9dd4d5016">More...</a><br /></td></tr>
<tr class="separator:aaa5d0c2544350e9e591205c9dd4d5016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57f2867953160df90bd086c5a14383d8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a57f2867953160df90bd086c5a14383d8">haveError</a> ()</td></tr>
<tr class="memdesc:a57f2867953160df90bd086c5a14383d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Has an error occurred in writing or compressing data?  <a href="../../dc/de8/classevio_1_1_record_supply.html#a57f2867953160df90bd086c5a14383d8">More...</a><br /></td></tr>
<tr class="separator:a57f2867953160df90bd086c5a14383d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0186cf8e0547e4f6d4e804a0a0e88ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#af0186cf8e0547e4f6d4e804a0a0e88ec">haveError</a> (bool err)</td></tr>
<tr class="memdesc:af0186cf8e0547e4f6d4e804a0a0e88ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set whether an error occurred in writing or compressing data.  <a href="../../dc/de8/classevio_1_1_record_supply.html#af0186cf8e0547e4f6d4e804a0a0e88ec">More...</a><br /></td></tr>
<tr class="separator:af0186cf8e0547e4f6d4e804a0a0e88ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfc466964e70de677752a6010045ece6"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#acfc466964e70de677752a6010045ece6">getError</a> ()</td></tr>
<tr class="memdesc:acfc466964e70de677752a6010045ece6"><td class="mdescLeft">&#160;</td><td class="mdescRight">If there is an error, this contains the error message.  <a href="../../dc/de8/classevio_1_1_record_supply.html#acfc466964e70de677752a6010045ece6">More...</a><br /></td></tr>
<tr class="separator:acfc466964e70de677752a6010045ece6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ae9f6d3176378de853730c79c56ea4b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a7ae9f6d3176378de853730c79c56ea4b">setError</a> (std::string &amp;err)</td></tr>
<tr class="memdesc:a7ae9f6d3176378de853730c79c56ea4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the error message.  <a href="../../dc/de8/classevio_1_1_record_supply.html#a7ae9f6d3176378de853730c79c56ea4b">More...</a><br /></td></tr>
<tr class="separator:a7ae9f6d3176378de853730c79c56ea4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac10918d77653c80b7ed9268d8621b8c2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#ac10918d77653c80b7ed9268d8621b8c2">isDiskFull</a> ()</td></tr>
<tr class="memdesc:ac10918d77653c80b7ed9268d8621b8c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Has the writing of a <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html" title="This class provides the items which are supplied by the RecordSupply class.">RecordRingItem</a> to disk has been stopped due to the disk partition being full?  <a href="../../dc/de8/classevio_1_1_record_supply.html#ac10918d77653c80b7ed9268d8621b8c2">More...</a><br /></td></tr>
<tr class="separator:ac10918d77653c80b7ed9268d8621b8c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b10f58e40cfaca7314ba8470de55b0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a5b10f58e40cfaca7314ba8470de55b0e">setDiskFull</a> (bool full)</td></tr>
<tr class="memdesc:a5b10f58e40cfaca7314ba8470de55b0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set whether the writing of a <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html" title="This class provides the items which are supplied by the RecordSupply class.">RecordRingItem</a> to disk has been stopped due to the disk partition being full.  <a href="../../dc/de8/classevio_1_1_record_supply.html#a5b10f58e40cfaca7314ba8470de55b0e">More...</a><br /></td></tr>
<tr class="separator:a5b10f58e40cfaca7314ba8470de55b0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This thread-safe, lock-free class is used to provide a very fast supply of RecordRingItems which are reused (using Disruptor software package). </p>
<p>It is a supply of RecordRingItems in which a single producer does a <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#af6ac986bb6d740afcbc0b9f4560e1564">get()</a>, fills the record with data, and finally does a <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a68fd39ed3f305468efa495962bf2b5a9">publish(std::shared_ptr&lt;RecordRingItem&gt; &amp;)</a> to let consumers know the data is ready.</p>
<p>This class is setup to handle 2 types of consumers. The first type is a thread which compresses a record's data. The number of such consumers is set in the constructor. Each of these will call <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a63190f0963f537c6fb6b29d8377beaa5">getToCompress(uint32_t)</a> to get a record and eventually call <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#ac80bfbdf6f82fd10cc0631348d784fa6">releaseCompressor(std::shared_ptr&lt;RecordRingItem&gt; &amp;)</a> to indicate it is finished compressing and the record is available for writing to disk.</p>
<p>The second type of consumer is a single thread which writes all compressed records to a file. This will call <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#ada13c1639029905ae234fa384cadd82b">getToWrite()</a> to get a record and eventually call <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a035753d88ac18275851d42bde9b53eb3">releaseWriter(std::shared_ptr&lt;RecordRingItem&gt; &amp;)</a> to indicate it is finished writing and the record is available for being filled with new data.</p>
<p>Due to the multithreaded nature of writing files using this class, a mechanism for reporting errors that occur in the writing and compressing threads is provided. Also, and probably more importantly, one can call <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a5b0898bcf9761a1867eaa2b0c00b3f6a" title="Method to have sequence barriers throw a Disruptor&#39;s AlertException.">errorAlert()</a> to notify any compression or write threads that an error has occurred. That way these threads can clean up and exit.</p>
<p>It transparently makes sure that all records are written in the proper order.</p>
<pre><code></code></pre><pre><code>  This is a graphical representation of how our ring buffer is set up.</code></pre><pre><code>  (1) The producer who calls <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#af6ac986bb6d740afcbc0b9f4560e1564" title="Get the next available record item from the ring buffer.">get()</a> will get a ring item allowing a record to be
      filled. That same user does a <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a68fd39ed3f305468efa495962bf2b5a9" title="Tell consumers that the record item is ready for consumption.">publish()</a> when done with the record.</code></pre><pre><code>  (2) The consumer who calls <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a63190f0963f537c6fb6b29d8377beaa5" title="Get the next available record item from the ring buffer in order to compress the data already in it.">getToCompress()</a> will get that ring item and will
      compress its data. There may be any number of compression threads
      as long as <b># threads &lt;= # of ring items!!!</b>.
      That same user does a <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#ac80bfbdf6f82fd10cc0631348d784fa6" title="A compressing thread releases its claim on the given ring buffer item so it becomes available for use...">releaseCompressor()</a> when done with the record.</code></pre><pre><code>  (3) The consumer who calls <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#ada13c1639029905ae234fa384cadd82b" title="Get the next available record item from the ring buffer in order to write data into it.">getToWrite()</a> will get that ring item and will
      write its data to a file or another buffer. There may be only 1
      such thread. This same user does a <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a035753d88ac18275851d42bde9b53eb3" title="A writer thread releases its claim on the given ring buffer item so it becomes available for reuse by...">releaseWriter()</a> when done with the record.</code></pre><pre><code>                        ||
                        ||  writeBarrier
          &gt;             ||
        /             ________
   Write thread     /    |    \
             ---&gt;  / 1 _ | _ 2 \  &lt;---- Compression Threads 1-M
 ================ | __ /   \ __ |               |
                  |  6 |    | 3 |               V
            ^     | __ | __ | __| ==========================
            |      \   5 |   4 /       compressBarrier
        Producer-&gt;  \ __ | __ /</code></pre><pre><code></code></pre><dl class="section version"><dt>Version</dt><dd>6.0 </dd></dl>
<dl class="section since"><dt>Since</dt><dd>6.0 11/5/19 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>timmer </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a47d72338250d1be25e5e1fdfb2203684"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47d72338250d1be25e5e1fdfb2203684">&#9670;&nbsp;</a></span>RecordSupply() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">evio::RecordSupply::RecordSupply </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<p>Ring size of 4 records, compression thread count of 1, no compression, little endian data. </p>

</div>
</div>
<a id="ab292a973d6671f9581e940617eff7cb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab292a973d6671f9581e940617eff7cb0">&#9670;&nbsp;</a></span>RecordSupply() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">evio::RecordSupply::RecordSupply </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html">RecordSupply</a> &amp;&#160;</td>
          <td class="paramname"><em>supply</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a149df78b303a2043f849dd2670dcfff3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a149df78b303a2043f849dd2670dcfff3">&#9670;&nbsp;</a></span>RecordSupply() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">evio::RecordSupply::RecordSupply </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ringSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d7d/classevio_1_1_byte_order.html">ByteOrder</a>&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>threadCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>maxEventCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>maxBufferSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d08/classevio_1_1_compressor.html#aed2330d08ee8c96b2690fec7f9a68747">Compressor::CompressionType</a> &amp;&#160;</td>
          <td class="paramname"><em>compressionType</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ringSize</td><td>number of <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html" title="This class provides the items which are supplied by the RecordSupply class.">RecordRingItem</a> objects in ring buffer. </td></tr>
    <tr><td class="paramname">order</td><td>byte order of RecordOutputStream in each <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html" title="This class provides the items which are supplied by the RecordSupply class.">RecordRingItem</a> object. </td></tr>
    <tr><td class="paramname">threadCount</td><td>number of threads simultaneously doing compression. Must be &lt;= ringSize. </td></tr>
    <tr><td class="paramname">maxEventCount</td><td>max number of events each record can hold. Value &lt;= O means use default (1M). </td></tr>
    <tr><td class="paramname">maxBufferSize</td><td>max number of uncompressed data bytes each record can hold. Value of &lt; 8MB results in default of 8MB. </td></tr>
    <tr><td class="paramname">compressionType</td><td>type of data compression to do. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d0/d0b/classevio_1_1_evio_exception.html" title="Exception class for Evio software package.">EvioException</a></td><td>if args &lt; 1, ringSize not power of 2, threadCount &gt; ringSize. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html#a6e3fd33c6c06c95a900a88a261b4590b">evio::RecordRingItem::eventFactory()</a>, and <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html#a2fff048e382fec687bf8f62c1c84ae46">evio::RecordRingItem::setEventFactorySettings()</a>.</p>

</div>
</div>
<a id="ae73df7e609b8b0e534fed47a865f5e1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae73df7e609b8b0e534fed47a865f5e1b">&#9670;&nbsp;</a></span>~RecordSupply()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">evio::RecordSupply::~RecordSupply </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5b0898bcf9761a1867eaa2b0c00b3f6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b0898bcf9761a1867eaa2b0c00b3f6a">&#9670;&nbsp;</a></span>errorAlert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evio::RecordSupply::errorAlert </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to have sequence barriers throw a Disruptor's AlertException. </p>
<p>In this case, we can use it to warn write and compress threads which are waiting on barrier.waitFor() in <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a63190f0963f537c6fb6b29d8377beaa5">getToCompress(uint32_t)</a> and <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#ada13c1639029905ae234fa384cadd82b">getToWrite()</a>. Do this in case of a write, compress, or some other error. This allows any threads waiting on these 2 methods to wake up, clean up, and exit. </p>

</div>
</div>
<a id="af6ac986bb6d740afcbc0b9f4560e1564"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6ac986bb6d740afcbc0b9f4560e1564">&#9670;&nbsp;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html">RecordRingItem</a> &gt; evio::RecordSupply::get </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the next available record item from the ring buffer. </p>
<p>Use it to write data into the record. </p><dl class="section return"><dt>Returns</dt><dd>next available record item in ring buffer in order to write data into it. </dd></dl>

</div>
</div>
<a id="acfc466964e70de677752a6010045ece6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfc466964e70de677752a6010045ece6">&#9670;&nbsp;</a></span>getError()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string evio::RecordSupply::getError </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If there is an error, this contains the error message. </p>
<dl class="section return"><dt>Returns</dt><dd>error message if there is an error. </dd></dl>

</div>
</div>
<a id="a1f795d94a49b3b2e4e397c0107042c1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f795d94a49b3b2e4e397c0107042c1f">&#9670;&nbsp;</a></span>getFillLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t evio::RecordSupply::getFillLevel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the percentage of data-filled but unwritten records in ring. </p>
<p>Value of 0 means everything's been written. Value of 100 means that all records in the ring are filled with data (perhaps in various stages of being compressed) and have not been written yet.</p>
<dl class="section return"><dt>Returns</dt><dd>percentage of used records in ring. </dd></dl>

</div>
</div>
<a id="a196dfd437db8f2f2c6a0e23700ef2462"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a196dfd437db8f2f2c6a0e23700ef2462">&#9670;&nbsp;</a></span>getLastSequence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t evio::RecordSupply::getLastSequence </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the sequence of last ring buffer item published (seq starts at 0). </p>
<dl class="section return"><dt>Returns</dt><dd>sequence of last ring buffer item published (seq starts at 0). </dd></dl>

</div>
</div>
<a id="ac1581122e8b78be37ce5283b99aa45da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1581122e8b78be37ce5283b99aa45da">&#9670;&nbsp;</a></span>getMaxRingBytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t evio::RecordSupply::getMaxRingBytes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the max number of bytes the records in this supply can hold all together. </p>
<dl class="section return"><dt>Returns</dt><dd>max number of bytes the records in this supply can hold all together. </dd></dl>

</div>
</div>
<a id="a980db60ae9c6f538d3a24ad95359a316"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a980db60ae9c6f538d3a24ad95359a316">&#9670;&nbsp;</a></span>getOrder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d7d/classevio_1_1_byte_order.html">ByteOrder</a> &amp; evio::RecordSupply::getOrder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the byte order of all records in this supply. </p>
<dl class="section return"><dt>Returns</dt><dd>byte order of all records in this supply. </dd></dl>

</div>
</div>
<a id="ab01508dc964baf3d2f977e44fb6e4801"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab01508dc964baf3d2f977e44fb6e4801">&#9670;&nbsp;</a></span>getRingSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t evio::RecordSupply::getRingSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of records in this supply. </p>
<dl class="section return"><dt>Returns</dt><dd>number of records in this supply. </dd></dl>

</div>
</div>
<a id="a63190f0963f537c6fb6b29d8377beaa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63190f0963f537c6fb6b29d8377beaa5">&#9670;&nbsp;</a></span>getToCompress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html">RecordRingItem</a> &gt; evio::RecordSupply::getToCompress </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>threadNumber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the next available record item from the ring buffer in order to compress the data already in it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">threadNumber</td><td>number of thread (0,1, ...) used to compress. This number cannot exceed (compressionThreadCount - 1). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>next available record item in ring buffer in order to compress data already in it. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Disruptor::AlertException</td><td>if <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a5b0898bcf9761a1867eaa2b0c00b3f6a">errorAlert()</a> called. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ada13c1639029905ae234fa384cadd82b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada13c1639029905ae234fa384cadd82b">&#9670;&nbsp;</a></span>getToWrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html">RecordRingItem</a> &gt; evio::RecordSupply::getToWrite </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the next available record item from the ring buffer in order to write data into it. </p>
<dl class="section return"><dt>Returns</dt><dd>next available record item in ring buffer in order to write data into it. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Disruptor::AlertException</td><td>if <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a5b0898bcf9761a1867eaa2b0c00b3f6a">errorAlert()</a> called. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a57f2867953160df90bd086c5a14383d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57f2867953160df90bd086c5a14383d8">&#9670;&nbsp;</a></span>haveError() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool evio::RecordSupply::haveError </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Has an error occurred in writing or compressing data? </p>
<dl class="section return"><dt>Returns</dt><dd><div class="fragment"><div class="line"><span class="keyword">true</span> </div>
</div><!-- fragment --> if an error occurred in writing or compressing data, else<div class="fragment"><div class="line"><span class="keyword">false</span> </div>
</div><!-- fragment --> . </dd></dl>

</div>
</div>
<a id="af0186cf8e0547e4f6d4e804a0a0e88ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0186cf8e0547e4f6d4e804a0a0e88ec">&#9670;&nbsp;</a></span>haveError() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evio::RecordSupply::haveError </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>err</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set whether an error occurred in writing or compressing data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">err</td><td>if<div class="fragment"><div class="line"><span class="keyword">true</span> </div>
</div><!-- fragment --> an error occurred in writing or compressing data, else<div class="fragment"><div class="line"><span class="keyword">false</span> </div>
</div><!-- fragment --> . </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac10918d77653c80b7ed9268d8621b8c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac10918d77653c80b7ed9268d8621b8c2">&#9670;&nbsp;</a></span>isDiskFull()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool evio::RecordSupply::isDiskFull </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Has the writing of a <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html" title="This class provides the items which are supplied by the RecordSupply class.">RecordRingItem</a> to disk has been stopped due to the disk partition being full? </p>
<dl class="section return"><dt>Returns</dt><dd>true if he writing of a <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html" title="This class provides the items which are supplied by the RecordSupply class.">RecordRingItem</a> to disk has been stopped due to the disk partition being full. </dd></dl>

</div>
</div>
<a id="a68fd39ed3f305468efa495962bf2b5a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68fd39ed3f305468efa495962bf2b5a9">&#9670;&nbsp;</a></span>publish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evio::RecordSupply::publish </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html">RecordRingItem</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tell consumers that the record item is ready for consumption. </p>
<p>To be used in conjunction with <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#af6ac986bb6d740afcbc0b9f4560e1564">get()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>record item available for consumers' use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaa5d0c2544350e9e591205c9dd4d5016"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa5d0c2544350e9e591205c9dd4d5016">&#9670;&nbsp;</a></span>release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evio::RecordSupply::release </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>threadNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>sequenceNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release claim on ring items up to sequenceNum for the given compressor thread. </p>
<p>For internal use only - to free up records that the compressor thread will skip over anyway. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">threadNum</td><td>compressor thread number. </td></tr>
    <tr><td class="paramname">sequenceNum</td><td>sequence to release. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac80bfbdf6f82fd10cc0631348d784fa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac80bfbdf6f82fd10cc0631348d784fa6">&#9670;&nbsp;</a></span>releaseCompressor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evio::RecordSupply::releaseCompressor </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html">RecordRingItem</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A compressing thread releases its claim on the given ring buffer item so it becomes available for use by writing thread behind the write barrier. </p>
<p>Because a compressing thread gets only every Nth record where N = compressionThreadCount, once it releases this record it also needs to release all events coming after, up until the one it will take next. In other words, also release the records it will skip over next. This allows close() to be called at any time without things hanging up.</p>
<p>To be used in conjunction with <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a63190f0963f537c6fb6b29d8377beaa5">getToCompress(uint32_t)</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>item in ring buffer to release for reuse. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a035753d88ac18275851d42bde9b53eb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a035753d88ac18275851d42bde9b53eb3">&#9670;&nbsp;</a></span>releaseWriter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool evio::RecordSupply::releaseWriter </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html">RecordRingItem</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A writer thread releases its claim on the given ring buffer item so it becomes available for reuse by the producer. </p>
<p>To be used in conjunction with <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#ada13c1639029905ae234fa384cadd82b">getToWrite()</a>.</p>
<p>Care must be taken to ensure thread-safety. The following can happen if no precautions are taken. In the case of EventWriterUnsync, writing to a file involves 2, simultaneous, asynchronous writes to a file - both in separate threads to the thread which calls the "write" method. If the writing of the later item finishes first, it releases it's item and sequence which, unfortunately, also releases the previous item's sequence (which is still being written). When the first write is complete, it also releases its item. However item.getSequenceObj() will return null (causing NullPointerException) because it was already released thereby allowing it to be reused and reset called on it.</p>
<p>In order to prevent such a scenario, releaseWriter ensures that items are only released in sequence.</p>
<p>If the same item is released more than once, bad things will happen. Thus the caller must take steps to prevent it. To avoid problems, call <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html#a57a2eb1fd506a8f6b0f48406cc7c59a5">RecordRingItem#setAlreadyReleased(bool)</a> and set to true if item is released but will still be used in some manner.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>item in ring buffer to release for reuse. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false if item or released since item is null, else true. </dd></dl>

</div>
</div>
<a id="a88283fcf1be35de2207549cbe8c00062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88283fcf1be35de2207549cbe8c00062">&#9670;&nbsp;</a></span>releaseWriterSequential()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool evio::RecordSupply::releaseWriterSequential </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html">RecordRingItem</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A writer thread releases its claim on the given ring buffer item so it becomes available for reuse by the producer. </p>
<p>To be used in conjunction with <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#ada13c1639029905ae234fa384cadd82b">getToWrite()</a>.</p>
<p>Care must be taken to ensure thread-safety. This method may only be called if the writing is done IN THE SAME THREAD as the calling of this method so that items are released in sequence as ensured by the caller. Otherwise use <a class="el" href="../../dc/de8/classevio_1_1_record_supply.html#a035753d88ac18275851d42bde9b53eb3">releaseWriter(std::shared_ptr&lt;RecordRingItem&gt; &amp;)</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>item in ring buffer to release for reuse. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false if item not released or item is null, else true. </dd></dl>

</div>
</div>
<a id="a5b10f58e40cfaca7314ba8470de55b0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b10f58e40cfaca7314ba8470de55b0e">&#9670;&nbsp;</a></span>setDiskFull()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evio::RecordSupply::setDiskFull </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>full</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set whether the writing of a <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html" title="This class provides the items which are supplied by the RecordSupply class.">RecordRingItem</a> to disk has been stopped due to the disk partition being full. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">full</td><td>true if he writing of a <a class="el" href="../../db/dc8/classevio_1_1_record_ring_item.html" title="This class provides the items which are supplied by the RecordSupply class.">RecordRingItem</a> to disk has been stopped due to the disk partition being full. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7ae9f6d3176378de853730c79c56ea4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ae9f6d3176378de853730c79c56ea4b">&#9670;&nbsp;</a></span>setError()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evio::RecordSupply::setError </td>
          <td>(</td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>err</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the error message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">err</td><td>error message. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../d0/d2f/_record_supply_8h.html">RecordSupply.h</a></li>
<li><a class="el" href="../../d7/d33/_record_supply_8cpp.html">RecordSupply.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d9/deb/namespaceevio.html">evio</a></li><li class="navelem"><a class="el" href="../../dc/de8/classevio_1_1_record_supply.html">RecordSupply</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
