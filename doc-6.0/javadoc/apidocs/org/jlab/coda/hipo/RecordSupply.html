<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- GitHub action javadoc-cleanup -->
<!-- End javadoc-cleanup block -->
<!-- Generated by javadoc (17) -->
<title>RecordSupply (Jefferson Lab EVIO Java Library (JEVIO) 6.1.2 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-09-16">
<meta name="description" content="declaration: package: org.jlab.coda.hipo, class: RecordSupply">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/RecordSupply.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.jlab.coda.hipo</a></div>
<h1 title="Class RecordSupply" class="title">Class RecordSupply</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.jlab.coda.hipo.RecordSupply</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">RecordSupply</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">This thread-safe, lock-free class is used to provide a very fast supply
 of RecordRingItems which are reused (using Disruptor software package).<p>

 It is a supply of RecordRingItems in which a single producer does a <a href="#get()"><code>get()</code></a>,
 fills the record with data, and finally does a <a href="#publish(org.jlab.coda.hipo.RecordRingItem)"><code>publish(RecordRingItem)</code></a>
 to let consumers know the data is ready.<p>

 This class is set up to handle 2 types of consumers.
 The first type is a thread which compresses a record's data.
 The number of such consumers is set in the constructor.
 Each of these will call <a href="#getToCompress(int)"><code>getToCompress(int)</code></a> to get a record
 and eventually call <a href="#releaseCompressor(org.jlab.coda.hipo.RecordRingItem)"><code>releaseCompressor(RecordRingItem)</code></a> to indicate it is
 finished compressing and the record is available for writing to disk.<p>

 The second type of consumer is a single thread which writes all compressed
 records to a file. This will call <a href="#getToWrite()"><code>getToWrite()</code></a> to get a record
 and eventually call <a href="#releaseWriter(org.jlab.coda.hipo.RecordRingItem)"><code>releaseWriter(RecordRingItem)</code></a> to indicate it is
 finished writing and the record is available for being filled with new data.<p>

 Due to the multithreaded nature of writing files using this class, a mechanism
 for reporting errors that occur in the writing and compressing threads is provided.
 Also, and probably more importantly, one can call errorAlert() to notify any
 compression or write threads that an error has occurred. That way these threads
 can clean up and exit.<p>

 It transparently makes sure that all records are written in the proper order.

 <pre><code>

   This is a graphical representation of how our ring buffer is set up.

   (1) The producer who calls get() will get a ring item allowing a record to be
       filled. That same user does a publish() when done with the record.

   (2) The consumer who calls getToCompress() will get that ring item and will
       compress its data. There may be any number of compression threads
       as long as <b># threads &lt;= # of ring items!!!</b>.
       That same user does a releaseCompressor() when done with the record.

   (3) The consumer who calls getToWrite() will get that ring item and will
       write its data to a file or another buffer. There may be only 1
       such thread. This same user does a releaseWriter() when done with the record.

                       ||
                       ||  writeBarrier
          ^            ||
         /            _____
    Write thread     /  |  \
              ---&gt;  /1 _|_ 2\  &lt;---- Compression Threads 1-M
  ================ |__/   \__|               |
                   |6 |   | 3|               V
             ^     |__|___|__| ==========================
             |      \ 5 | 4 /       compressBarrier
         Producer-&gt;  \__|__/


 </code></pre></div>
<dl class="notes">
<dt>Since:</dt>
<dd>6.0 9/21/17</dd>
<dt>Version:</dt>
<dd>6.0</dd>
<dt>Author:</dt>
<dd>timmer</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">RecordSupply</a>()</code></div>
<div class="col-last even-row-color">
<div class="block">Constructor.</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(int,java.nio.ByteOrder,int,int,int,org.jlab.coda.hipo.CompressionType)" class="member-name-link">RecordSupply</a><wbr>(int&nbsp;ringSize,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteOrder.html" title="class or interface in java.nio" class="external-link">ByteOrder</a>&nbsp;order,
 int&nbsp;threadCount,
 int&nbsp;maxEventCount,
 int&nbsp;maxBufferSize,
 <a href="CompressionType.html" title="enum class in org.jlab.coda.hipo">CompressionType</a>&nbsp;compressionType)</code></div>
<div class="col-last odd-row-color">
<div class="block">Constructor.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#errorAlert()" class="member-name-link">errorAlert</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Method to have sequence barriers throw a Disruptor's AlertException.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="RecordRingItem.html" title="class in org.jlab.coda.hipo">RecordRingItem</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#get()" class="member-name-link">get</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the next available record item from the ring buffer.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getError()" class="member-name-link">getError</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If there is an error, this contains the error message.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFillLevel()" class="member-name-link">getFillLevel</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the percentage of data-filled but unwritten records in ring.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLastSequence()" class="member-name-link">getLastSequence</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the sequence of last ring buffer item published (seq starts at 0).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMaxRingBytes()" class="member-name-link">getMaxRingBytes</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the max number of bytes the records in this supply can hold all together.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteOrder.html" title="class or interface in java.nio" class="external-link">ByteOrder</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getOrder()" class="member-name-link">getOrder</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the byte order of all records in this supply.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRingSize()" class="member-name-link">getRingSize</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the number of records in this supply.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="RecordRingItem.html" title="class in org.jlab.coda.hipo">RecordRingItem</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getToCompress(int)" class="member-name-link">getToCompress</a><wbr>(int&nbsp;threadNumber)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the next available record item from the ring buffer
 in order to compress the data already in it.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="RecordRingItem.html" title="class in org.jlab.coda.hipo">RecordRingItem</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getToWrite()" class="member-name-link">getToWrite</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the next available record item from the ring buffer
 in order to write data into it.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#haveError()" class="member-name-link">haveError</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Has an error occurred in writing or compressing data?</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#haveError(boolean)" class="member-name-link">haveError</a><wbr>(boolean&nbsp;err)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set whether an error occurred in writing or compressing data.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isDiskFull()" class="member-name-link">isDiskFull</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Has the writing of a RecordRingItem to disk has been stopped
 due to the disk partition being full?</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#publish(org.jlab.coda.hipo.RecordRingItem)" class="member-name-link">publish</a><wbr>(<a href="RecordRingItem.html" title="class in org.jlab.coda.hipo">RecordRingItem</a>&nbsp;item)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Tell consumers that the record item is ready for consumption.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#release(int,long)" class="member-name-link">release</a><wbr>(int&nbsp;threadNum,
 long&nbsp;sequenceNum)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Release claim on ring items up to sequenceNum for the given compressor thread.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#releaseCompressor(org.jlab.coda.hipo.RecordRingItem)" class="member-name-link">releaseCompressor</a><wbr>(<a href="RecordRingItem.html" title="class in org.jlab.coda.hipo">RecordRingItem</a>&nbsp;item)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">A compressing thread releases its claim on the given ring buffer item
 so it becomes available for use by writing thread behind the write barrier.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#releaseWriter(org.jlab.coda.hipo.RecordRingItem)" class="member-name-link">releaseWriter</a><wbr>(<a href="RecordRingItem.html" title="class in org.jlab.coda.hipo">RecordRingItem</a>&nbsp;item)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">A writer thread releases its claim on the given ring buffer item
 so it becomes available for reuse by the producer.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#releaseWriterSequential(org.jlab.coda.hipo.RecordRingItem)" class="member-name-link">releaseWriterSequential</a><wbr>(<a href="RecordRingItem.html" title="class in org.jlab.coda.hipo">RecordRingItem</a>&nbsp;item)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">A writer thread releases its claim on the given ring buffer item
 so it becomes available for reuse by the producer.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setDiskFull(boolean)" class="member-name-link">setDiskFull</a><wbr>(boolean&nbsp;full)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set whether the writing of a RecordRingItem to disk has been stopped
 due to the disk partition being full.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setError(java.lang.String)" class="member-name-link">setError</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;err)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the error message.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>RecordSupply</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">RecordSupply</span>()</div>
<div class="block">Constructor. Ring size of 4 records, compression thread count of 1,
 LZ4 compression, little endian data.</div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(int,java.nio.ByteOrder,int,int,int,org.jlab.coda.hipo.CompressionType)">
<h3>RecordSupply</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">RecordSupply</span><wbr><span class="parameters">(int&nbsp;ringSize,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteOrder.html" title="class or interface in java.nio" class="external-link">ByteOrder</a>&nbsp;order,
 int&nbsp;threadCount,
 int&nbsp;maxEventCount,
 int&nbsp;maxBufferSize,
 <a href="CompressionType.html" title="enum class in org.jlab.coda.hipo">CompressionType</a>&nbsp;compressionType)</span>
             throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></span></div>
<div class="block">Constructor.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>ringSize</code> - number of RecordRingItem objects in ring buffer.</dd>
<dd><code>order</code> - byte order of RecordOutputStream in each RecordRingItem object.</dd>
<dd><code>threadCount</code> - number of threads simultaneously doing compression.
                        Must be &lt;= ringSize.</dd>
<dd><code>maxEventCount</code> - max number of events each record can hold.
                        Value &lt;= O means use default (1M).</dd>
<dd><code>maxBufferSize</code> - max number of uncompressed data bytes each record can hold.
                        Value of &lt; 8MB results in default of 8MB.</dd>
<dd><code>compressionType</code> - type of data compression to do.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if args &lt; 1, ringSize not power of 2,
                                  threadCount &gt; ringSize.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="errorAlert()">
<h3>errorAlert</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">errorAlert</span>()</div>
<div class="block">Method to have sequence barriers throw a Disruptor's AlertException.
 In this case, we can use it to warn write and compress threads which
 are waiting on barrier.waitFor() in <a href="#getToCompress(int)"><code>getToCompress(int)</code></a> and
 <a href="#getToWrite()"><code>getToWrite()</code></a>. Do this in case of a write, compress, or some other error.
 This allows any threads waiting on these 2 methods to wake up, clean up,
 and exit.</div>
</section>
</li>
<li>
<section class="detail" id="getMaxRingBytes()">
<h3>getMaxRingBytes</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getMaxRingBytes</span>()</div>
<div class="block">Get the max number of bytes the records in this supply can hold all together.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>max number of bytes the records in this supply can hold all together.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRingSize()">
<h3>getRingSize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getRingSize</span>()</div>
<div class="block">Get the number of records in this supply.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>number of records in this supply.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getOrder()">
<h3>getOrder</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteOrder.html" title="class or interface in java.nio" class="external-link">ByteOrder</a></span>&nbsp;<span class="element-name">getOrder</span>()</div>
<div class="block">Get the byte order of all records in this supply.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>byte order of all records in this supply.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getFillLevel()">
<h3>getFillLevel</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getFillLevel</span>()</div>
<div class="block">Get the percentage of data-filled but unwritten records in ring.
 Value of 0 means everything's been written. Value of 100 means
 that all records in the ring are filled with data (perhaps in
 various stages of being compressed) and have not been written yet.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>percentage of used records in ring.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLastSequence()">
<h3>getLastSequence</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getLastSequence</span>()</div>
<div class="block">Get the sequence of last ring buffer item published (seq starts at 0).</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>sequence of last ring buffer item published (seq starts at 0).</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="get()">
<h3>get</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="RecordRingItem.html" title="class in org.jlab.coda.hipo">RecordRingItem</a></span>&nbsp;<span class="element-name">get</span>()</div>
<div class="block">Get the next available record item from the ring buffer.
 Use it to write data into the record.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>next available record item in ring buffer in order to write data into it.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="publish(org.jlab.coda.hipo.RecordRingItem)">
<h3>publish</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">publish</span><wbr><span class="parameters">(<a href="RecordRingItem.html" title="class in org.jlab.coda.hipo">RecordRingItem</a>&nbsp;item)</span></div>
<div class="block">Tell consumers that the record item is ready for consumption.
 To be used in conjunction with <a href="#get()"><code>get()</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>item</code> - record item available for consumers' use.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getToCompress(int)">
<h3>getToCompress</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="RecordRingItem.html" title="class in org.jlab.coda.hipo">RecordRingItem</a></span>&nbsp;<span class="element-name">getToCompress</span><wbr><span class="parameters">(int&nbsp;threadNumber)</span>
                             throws <span class="exceptions">com.lmax.disruptor.AlertException,
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<div class="block">Get the next available record item from the ring buffer
 in order to compress the data already in it.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>threadNumber</code> - number of thread (0,1, ...) used to compress.
                     This number cannot exceed (compressionThreadCount - 1).</dd>
<dt>Returns:</dt>
<dd>next available record item in ring buffer
         in order to compress data already in it.</dd>
<dt>Throws:</dt>
<dd><code>com.lmax.disruptor.AlertException</code> - if <a href="#errorAlert()"><code>errorAlert()</code></a> called.</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code> - if thread interrupted.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getToWrite()">
<h3>getToWrite</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="RecordRingItem.html" title="class in org.jlab.coda.hipo">RecordRingItem</a></span>&nbsp;<span class="element-name">getToWrite</span>()
                          throws <span class="exceptions">com.lmax.disruptor.AlertException,
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<div class="block">Get the next available record item from the ring buffer
 in order to write data into it.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>next available record item in ring buffer
         in order to write data into it.</dd>
<dt>Throws:</dt>
<dd><code>com.lmax.disruptor.AlertException</code> - if <a href="#errorAlert()"><code>errorAlert()</code></a> called.</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code> - if thread interrupted.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="releaseCompressor(org.jlab.coda.hipo.RecordRingItem)">
<h3>releaseCompressor</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">releaseCompressor</span><wbr><span class="parameters">(<a href="RecordRingItem.html" title="class in org.jlab.coda.hipo">RecordRingItem</a>&nbsp;item)</span></div>
<div class="block">A compressing thread releases its claim on the given ring buffer item
 so it becomes available for use by writing thread behind the write barrier.
 Because a compressing thread gets only every Nth record where
 N = compressionThreadCount, once it releases this record it also
 needs to release all events coming after, up until the one it will
 take next. In other words, also release the records it will skip over
 next. This allows close() to be called at any time without things
 hanging up.<p>

 To be used in conjunction with <a href="#getToCompress(int)"><code>getToCompress(int)</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>item</code> - item in ring buffer to release for reuse.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="releaseWriterSequential(org.jlab.coda.hipo.RecordRingItem)">
<h3>releaseWriterSequential</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">releaseWriterSequential</span><wbr><span class="parameters">(<a href="RecordRingItem.html" title="class in org.jlab.coda.hipo">RecordRingItem</a>&nbsp;item)</span></div>
<div class="block">A writer thread releases its claim on the given ring buffer item
 so it becomes available for reuse by the producer.
 To be used in conjunction with <a href="#getToWrite()"><code>getToWrite()</code></a>.<p>

 Care must be taken to ensure thread-safety.
 This method may only be called if the writing is done IN THE SAME THREAD
 as the calling of this method so that items are released in sequence
 as ensured by the caller.
 Otherwise use <a href="#releaseWriter(org.jlab.coda.hipo.RecordRingItem)"><code>releaseWriter(RecordRingItem)</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>item</code> - item in ring buffer to release for reuse.</dd>
<dt>Returns:</dt>
<dd>false if item not released since item is null, else true.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="releaseWriter(org.jlab.coda.hipo.RecordRingItem)">
<h3>releaseWriter</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">releaseWriter</span><wbr><span class="parameters">(<a href="RecordRingItem.html" title="class in org.jlab.coda.hipo">RecordRingItem</a>&nbsp;item)</span></div>
<div class="block">A writer thread releases its claim on the given ring buffer item
 so it becomes available for reuse by the producer.
 To be used in conjunction with <a href="#getToWrite()"><code>getToWrite()</code></a>.<p>

 Care must be taken to ensure thread-safety.
 The following can happen if no precautions are taken.
 In the case of EventWriterUnsync, writing to a file involves 2, simultaneous,
 asynchronous writes to a file - both in separate threads to the thread which
 calls the "write" method. If the writing of the later item finishes first, it
 releases it's item and sequence which, unfortunately, also releases the
 previous item's sequence (which is still being written). When the first write is complete,
 it also releases its item. However item.getSequenceObj() will return null
 (causing NullPointerException) because it was already released thereby allowing
 it to be reused and reset called on it.<p>

 In order to prevent such a scenario, releaseWriter ensures that items are only
 released in sequence.<p>

 If the same item is released more than once, bad things will happen.
 Thus the caller must take steps to prevent it. To avoid problems,
 call <a href="RecordRingItem.html#setAlreadyReleased(boolean)"><code>RecordRingItem.setAlreadyReleased(boolean)</code></a> and set to true if
 item is released but will still be used in some manner.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>item</code> - item in ring buffer to release for reuse.</dd>
<dt>Returns:</dt>
<dd>false if item not released since item is null or is already released, else true.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="release(int,long)">
<h3>release</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">release</span><wbr><span class="parameters">(int&nbsp;threadNum,
 long&nbsp;sequenceNum)</span></div>
<div class="block">Release claim on ring items up to sequenceNum for the given compressor thread.
 For internal use only - to free up records that the compressor thread will skip
 over anyway.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>threadNum</code> - compressor thread number</dd>
<dd><code>sequenceNum</code> - sequence to release</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="haveError()">
<h3>haveError</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">haveError</span>()</div>
<div class="block">Has an error occurred in writing or compressing data?</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if an error occurred in writing or compressing data.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="haveError(boolean)">
<h3>haveError</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">haveError</span><wbr><span class="parameters">(boolean&nbsp;err)</span></div>
<div class="block">Set whether an error occurred in writing or compressing data.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>err</code> - <code>true</code> if an error occurred in writing or compressing data.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getError()">
<h3>getError</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getError</span>()</div>
<div class="block">If there is an error, this contains the error message.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>error message if there is an error.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setError(java.lang.String)">
<h3>setError</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setError</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;err)</span></div>
<div class="block">Set the error message.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>err</code> - error message.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isDiskFull()">
<h3>isDiskFull</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isDiskFull</span>()</div>
<div class="block">Has the writing of a RecordRingItem to disk has been stopped
 due to the disk partition being full?</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if he writing of a RecordRingItem to disk has been stopped
          due to the disk partition being full.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setDiskFull(boolean)">
<h3>setDiskFull</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setDiskFull</span><wbr><span class="parameters">(boolean&nbsp;full)</span></div>
<div class="block">Set whether the writing of a RecordRingItem to disk has been stopped
 due to the disk partition being full.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>full</code> - true if he writing of a RecordRingItem to disk has been stopped
             due to the disk partition being full.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2025. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
