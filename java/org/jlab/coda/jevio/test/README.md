
# Java Evio Test Program Guide

---------------------------

    Short, minimal guide to test programs that were collected over the years and left as is.
    
    NO GUARANTEES as to functionality or effectiveness, just dig in and parse it yourself.
    One possible source of things not working is that most of these programs were written
    for evio version 4 and may not translate well if assumptions about the format are built in.

---------------------------
| Tested? | Mirrored C++ file                                                                                     | File                                                                   | Function                                                                                                                                                                                                                                                                                                                                                                                         |
|---------|-------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| x       |                                                                                                       | [BigFileWrite.java](BigFileWrite.java)                                 | Write 2GB file in 15kB chunks with either RandomAccessFile, FileOutputStream (channels), or evio data with EventWriter and print out data rates.                                                                                                                                                                                                                                                 |
| x       | [CompactReaderAddSubtractTest.cpp](../../../../../../src/test/CompactReaderAddSubtractTest.cpp)       | [CompactReaderAddSubtractTest.java](CompactReaderAddSubtractTest.java) | Create and write events to buffer. Have EvioCompactReader scan buf, get EvioNodes, check them for status and print them out. Use reader.addStructure and removeStructure to change buf and then printout.                                                                                                                                                                                        |
| x       | [CompactReaderBugTest.cpp](../../../../../../src/test/CompactReaderBugTest.cpp)                       | [CompactReaderBugTest.java](CompactReaderBugTest.java)                 | Write buffer with hand-set evio 6 int data with unusual format (extra long header, user header without dictionary or first event), turn into byte data, read with EvioCompactReader, get and print data. Explore ByteBuffer capabilities.                                                                                                                                                        |
| x       | [EvioCompStructHandlerTest.cpp](../../../../../../src/test/EvioCompStructHandlerTest.cpp)             | [CompactStructureHandlerTest.java](CompactStructureHandlerTest.java)   | Create evio event buffer, put into EvioCompactStructureHandler, remove node, and examine resulting buffer.                                                                                                                                                                                                                                                                                       |
| x       | [CompositeTester.cpp](../../../../../../src/test/CompositeTester.cpp)                                 | [CompositeTester.java](CompositeTester.java)                           | Create buf with CompositeData by hand, check double swapped with original. Using strings with CompositeData, using CompositeData objects with padding (don't end up on 4 byte boundary), using CompositeData.Data class to create EvioEvent, write to file, read back. Print out XML form of each event in file (java). Method to print CompositeData object.                                    |
| x       |                                                                                                       | [CompressionTest.java](CompressionTest.java)                           | Comments on different compression formats gathered from various sources. Many methods to compress & decompress data with zlib/gzip/lz4 in different ways. Write compressed files and decompress while reading. All studies used to help in implementing compression handling. **NOT** useful for users.                                                                                          |
| x       | [DictTest.cpp](../../../../../../src/test/DictTest.cpp)                                               | [DictTest.java](DictTest.java)                                         | Many tests of dictionary use. Define different dictionaries. Methods to play with EvioXMLDictionary and EvioDictionaryEntry methods. Methods use dictionary with EvioEvent, EvioBank, and EvioSegment.                                                                                                                                                                                           |
| no      |                                                                                                       | [ExtractHallDdata.java](ExtractHallDdata.java)                         | Used only for HallD data compression test for ESNET. Take HallD data file, pull out data (not headers) and store in files to test for compressibility.                                                                                                                                                                                                                                           |
| no      |                                                                                                       | [FileTest.java](FileTest.java)                                         | Methods to test how the AsynchronousFileChannel affect its ByteBuffer arg when reading and writing, find free space on disk, writing event too large for record space, read/write/append data in files, use listeners and filters, write file with extra words in headers.                                                                                                                       |
| no      |                                                                                                       | [FileTestVer6.java](FileTestVer6.java)                                 | Create event in buffer of CODA Prestart, Go, write and read evio v6 data files.                                                                                                                                                                                                                                                                                                                  |
| x       |                                                                                                       | [FileWritingSpeedTest.java](FileWritingSpeedTest.java)                 | Test speed of writing evio file to disk.                                                                                                                                                                                                                                                                                                                                                         |
| x       | [FileWriteTest.cpp](../../../../../../src/test/FileWriteTest.cpp)                                     | [FileWriteTest.java](FileWriteTest.java)                               | Compare writing same events as ByteBuffers to file with EventWriterV4 (evio 4) and EventWriter (evio 6).                                                                                                                                                                                                                                                                                         |
| x       |                                                                                                       | [FirstEventTest.java](FirstEventTest.java)                             | Write file or buf with dictionary and first event. Or write first event after EventWriter created.                                                                                                                                                                                                                                                                                               |
| x       | [Hipo_Test.cpp](../../../../../../src/test/Hipo_Test.cpp)                                             | [HipoTest.java](HipoTest.java)                                         | Create events with CompactEventBuilder, write into hipo file with Writer or WriterMT and read back with Reader, printout. Also create events with createTreeEvent, write with EventWriter, read with EvioReader, printout. Also run similar tests on buffers.                                                                                                                                    |
| no      |                                                                                                       | [ReadAggOutput.java](ReadAggOutput.java)                               | Read and parse CODA data file produced in streaming mode with Aggregator.                                                                                                                                                                                                                                                                                                                        |
| x       | [ReadSequenceTest.cpp](../../../../../../src/test/ReadSequenceTest.cpp)                               | [ReadSequenceTest.java](ReadSequenceTest.java)                         | Write file, read events back with EvioReader.parseNextEvent() with sequential API call.                                                                                                                                                                                                                                                                                                          |
| x       | [ReadWriteTest.cpp](../../../../../../src/test/ReadWriteTest.cpp)                                     | [ReadWriteTest.java](ReadWriteTest.java)                               | Write 1 event with Writer class and a user-header specified in constructor into buffer.  Read back with Reader, EvioCompactReader and EvioReader and compare to original buffer.                                                                                                                                                                                                                 |
| x       | [ReadWriteV4Test.cpp](../../../../../../src/test/ReadWriteV4Test.cpp)                                 | [ReadWriteV4Test.java](ReadWriteV4Test.java)                           | Writes evio v4 file with EventWriterV4 with set endian, first event and dictionary, reads back. Routine to write evio v4 buffer. Reads back with EvioCompactReader and EvioReader.                                                                                                                                                                                                               |
| x       | [RecordSupplyTest.cpp](../../../../../../src/test/RecordSupplyTest.cpp)                               | [RecordSupplyTest.java](RecordSupplyTest.java)                         | Test of RecordSupply class (based on Disruptor-cpp) with one thread getting & writing into record, multiple threads compressing records, and a thread to get and write out final record. RecordSupply is **NOT** meant to be used directly, but is used in WriterMT to do multithreaded compression.                                                                                             |
| x       | [SequentialReaderTest.cpp](../../../../../../src/test/SequentialReaderTest.cpp)                       | [SequentialReaderTest.java](SequentialReaderTest.java)                 | Test what happens when reading events from file and calling random access methods first followed by sequential methods.                                                                                                                                                                                                                                                                          |
| x       | [SplitTest2.cpp](../../../../../../src/test/SplitTest2.cpp)                                           | [SplitTest.java](SplitTest.java)                                       | Test automatic file naming routines.                                                                                                                                                                                                                                                                                                                                                             |
| x       | [SwapTest.cpp](../../../../../../src/test/SwapTest.cpp)                                               | [SwapTest.java](SwapTest.java)                                         | Create evio event with all kinds of data, double swap it and compare data with original.                                                                                                                                                                                                                                                                                                         |
| x       | [Tree_Buf_Composite_Builder_Test.cpp](../../../../../../src/test/Tree_Buf_Composite_Builder_Test.cpp) | [TreeBufTest.java](TreeBufTest.java)                                   | Test BaseStructure's tree methods and finding structures thru filters and listeners.                                                                                                                                                                                                                                                                                                             |
